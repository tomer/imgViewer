<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Image viewer</title>
    <script type="text/javascript">
function loadImage() { 
  var img = document.getElementById("main");
  img.src = "splash.png";

  var favicon = document.createElement("link");
  favicon.rel = 'shortcut icon';
  favicon.href= img.src;
  document.getElementsByTagName('head')[0].appendChild(favicon);
}

function download() {
  var img = document.getElementById("main");
  var link = document.createElement('a');
  link.href = img.src;
  link.download = img.file||"";
  document.body.appendChild(link);
  link.click();
}

function openFile() {
  var fileInput = document.getElementById("input");
  if (null === fileInput) {
    fileInput = document.createElement('input');
    fileInput.type="file";
    fileInput.id="input";
    fileInput.accept="image/*";
    fileInput.style.display="none";
    fileInput.addEventListener("change", handleFiles, false);
    document.body.appendChild(fileInput);
  }
  fileInput.click();
}

function handleFiles() {
  var img = document.getElementById("main");
  for (let file of this.files) {
    img.file = file.name;
    var reader = new FileReader();
    reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
    reader.readAsDataURL(file);
  }
}

function zoomIn() {
  var img = document.getElementById("main");
  var scale = window.getComputedStyle(img).getPropertyValue('--scale');
  scale *=2;
  img.style.setProperty('--scale', scale);
}

function zoomOut() {
  var img = document.getElementById("main");
  var scale = window.getComputedStyle(img).getPropertyValue('--scale');
  scale /=2;
  img.style.setProperty('--scale', scale);
}

function zoomRegular() {
  var img = document.getElementById("main");
  img.style.setProperty('--scale', 1);
}

function rotate(rotate) {
  var img = document.getElementById("main");
  var angle = window.getComputedStyle(img).getPropertyValue('--rotate');
  angle = parseInt(angle);
  img.style.setProperty('--rotate', (rotate + angle) + 'deg');
}

function main() {
  loadImage();
}
    </script>
<style>
#toolbar {
  z-index: 999;
  position: fixed;
  width: 100%;
  text-align: center;
}
img#main {
  position: absolute; top: 0; bottom: 0; left: 0; right: 0;
  margin: auto;
  transition: all 0.5s ease-in;
  transform: scale(var(--scale)) rotate(var(--rotate));
  --scale: 1;
  --rotate: 0deg;
}
body {
  background-image: url(imagedoc-darknoise.png);
}
</style>

  </head>
  <body onload="main()">
    <div id="toolbar">
      <button onclick="openFile()">Open</button>
      <button onclick="zoomOut()">-</button>
      <button onclick="zoomRegular()">100%</button>
      <button onclick="zoomIn()">+</button>
      <button onclick="rotate(-90)">↶</button>
      <button onclick="rotate(90)">↷</button>
      <button onclick="download()">Download</button>
    </div>
    <div id="container">
      <img id="main" alt="Image" />
    </div>
  </body>
</html>
